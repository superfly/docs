<%= partial "/docs/partials/back_to_docs" unless current_page?('/docs') %>

<%
  @nav = [
    {
      title: "Getting Started",
      path: "/docs/getting-started/",
      open: current_page?("/docs"),
      links: [
        { text: "Quickstart: Launch your app", path: "/docs/getting-started/launch/" },
        { text: "Launch HelloFly Demo App", path: "/docs/getting-started/launch-demo" },
        { text: "Deep Dive Demo App", path: "/docs/deep-dive/" },
        { text: "Choose a Language or Framework", path: "/docs/getting-started/get-started-by-framework/" },
        { text: "Fly.io Essentials", path: "/docs/getting-started/essentials/" },
        { text: "Troubleshoot Deployments", path: "/docs/getting-started/troubleshooting/" }
      ]
    },
    {
      title: "Fly.io Blueprints",
      path: "/docs/blueprints/",
      open: false,
      links: site.get("docs/blueprints").children.reject{ |page| page.data.status == "alpha" || page.data.published == false }.map do |page|
        { text: page.data.title, path: page.request_path }
      end
    },
    {
      title: "Apps on Fly.io",
      path: "/docs/apps/",
      open: false,
      links: [
        { text: "Fly Apps Overview", path: "/docs/apps/overview/" },

        { text: "Fly Launch", path: "/docs/launch/" },

        { text: "Secrets", path: "/docs/apps/secrets/" },

        { text: "Production Checklist", path: "/docs/apps/going-to-production/" }
      ]
    },
    {
      title: "Languages & Frameworks",
      path: "/docs/languages-and-frameworks/",
      open: false,
      links: [
        { text: "Elixir", path: "/docs/elixir/" },
        { text: "Rails", path: "/docs/rails/getting-started/" },
        { text: "Laravel", path: "/docs/laravel/" },
        { text: "Django", path: "/docs/django/getting-started/" },
        { text: "JavaScript", path: "/docs/js/" },
        { text: "Rust", path: "/docs/rust/" },
        { text: "Python", path: "/docs/python/" },
        { text: "More...", path: "/docs/languages-and-frameworks/" }
      ]
    },
    {
      title: "Fly Machines",
      path: "/docs/machines/",
      open: false,
      links: [
        { text: "Introduction to Fly Machines", path: "/docs/machines/overview/" },
        { text: "Machines API", path: "/docs/machines/api/" },
        { text: "Run a New Machine", path: "/docs/machines/flyctl/fly-machine-run/" },
        { text: "Update a Machine", path: "/docs/machines/flyctl/fly-machine-update/" },
        { text: "Machine Sizing", path: "/docs/machines/guides-examples/machine-sizing/" },
        { text: "Machine Restart Policy", path: "/docs/machines/guides-examples/machine-restart-policy/" },
        { text: "Machine States", path: "/docs/machines/machine-states/" },
        { text: "Run User Code on Fly Machines", path: "/docs/machines/guides-examples/functions-with-machines/" },
        { text: "The Machine Runtime Environment", path: "/docs/machines/runtime-environment/" }
      ]
    },
    {
      title: "Fly GPUs",
      path: "/docs/gpus/",
      open: false,
      links: [
        { text: "GPU Quickstart", path: "/docs/gpus/gpu-quickstart/" },
        { text: "Getting Started with GPU Machines", path: "/docs/gpus/getting-started-gpus/" },
        { text: "Python GPU Dev Machine", path: "/docs/gpus/python-gpu-example/" }
      ]
    },
    {
      title: "Databases & Storage",
      path: "/docs/database-storage-guides/",
      open: false,
      links: [
        { text: "Tigris Object Storage", path: "/docs/tigris/" },
        { text: "Fly Postgres", path: "/docs/postgres/" },
        { text: "SQLite & LiteFS", path: "/docs/litefs/" },
        { text: "Upstash for RedisÂ®", path: "/docs/upstash/redis/" },
        { text: "Upstash Kafka", path: "/docs/upstash/kafka/" },
        { text: "Upstash Vector", path: "/docs/upstash/vector/" }
      ]
    },
    {
      title: "Fly Volumes",
      path: "/docs/volumes/",
      open: false,
      links: [
        { text: "Fly Volumes Overview", path: "/docs/volumes/overview/" },
        { text: "Create and Manage Volumes", path: "/docs/volumes/volume-manage/" },
        { text: "Manage Volume Snapshots", path: "/docs/volumes/snapshots/" },
        { text: "Volume States", path: "/docs/volumes/volume-states/" }
      ]
    },
    {
      title: "Fly Kubernetes",
      path: "/docs/kubernetes/",
      open: false,
      links: [
        { text: "Fly Kubernetes Quickstart", path: "/docs/kubernetes/fks-quickstart/" },
        { text: "Fly Kubernetes Features", path: "/docs/kubernetes/fks-features/" },
        { text: "Create an FKS Cluster", path: "/docs/kubernetes/clusters/" },
        { text: "Connect to an FKS Cluster", path: "/docs/kubernetes/connect-clusters/" },
        { text: "Configure FKS Services", path: "/docs/kubernetes/services/" },
        { text: "Use GPUs with FKS", path: "/docs/kubernetes/using-gpus/" },
        { text: "Use Volumes with FKS", path: "/docs/kubernetes/using-volumes/" }
      ]
    },
    {
      title: "Networking",
      path: "/docs/networking/",
      open: false,
      links: [
        { text: "Connect to an App Service", path: "/docs/networking/app-services/" },
        { text: "Public Networking", path: "/docs/networking/services/" },
        { text: "Private Networking", path: "/docs/networking/private-networking/" },
        { text: "Custom Private Networks", path: "/docs/networking/custom-private-networks/" },
        { text: "Flycast - Private Proxy Services", path: "/docs/networking/flycast/" },
        { text: "Dynamic Request Routing", path: "/docs/networking/dynamic-request-routing/" },
        { text: "Custom Domains", path: "/docs/networking/custom-domain/" },
        { text: "Automate Certificates via API", path: "/docs/networking/custom-domain-api/" },
        { text: "Request Headers", path: "/docs/networking/request-headers/" },
        { text: "Run UDP Services", path: "/docs/networking/udp-and-tcp/" },
        { text: "TLS Support", path: "/docs/networking/tls/" }
      ]
    },
    {
      title: "Monitoring",
      path: "/docs/monitoring/",
      open: false,
      links: [
        { text: "Metrics", path: "/docs/monitoring/metrics/" },
        { text: "Sentry Error Tracking", path: "/docs/monitoring/sentry/" },
        {
          title: "Logging",
          path: "/docs/monitoring/logging-overview/",
          links: [
            { text: "Live Tail Logs", path: "/docs/monitoring/live-tail-logs/" },
            { text: "Search Logs", path: "/docs/monitoring/search-logs/" },
            { text: "Export Logs", path: "/docs/monitoring/exporting-logs/" },
            { text: "Error Codes", path: "/docs/monitoring/error-codes/" }
          ]
        }
      ]
    },
    {
      title: "Security",
      path: "/docs/security/",
      open: false,
      links: [
        { text: "SSO for Organizations", path: "/docs/security/sso/" },
        { text: "Remove a Member from an Org", path: "/docs/security/remove-org-member/" },
        { text: "TLS Termination", path: "/docs/security/tls-termination/" },
        { text: "App Security by Arcjet", path: "/docs/security/arcjet/" },
        { text: "Access Tokens", path: "/docs/security/tokens/" },
        { text: "OpenID Connect", path: "/docs/reference/openid-connect/" },
        { text: "Shared Responsibility Model", path: "/docs/security/shared-responsibility/" },
        { text: "Security Practices and Compliance", path: "/docs/security/security-at-fly-io/" }
      ]
    },
    {
      title: "Reference",
      path: "/docs/reference/",
      open: false,
      links: [
        { text: "flyctl", path: "/docs/flyctl/" },
        { text: "App Config Reference (fly.toml)", path: "/docs/reference/configuration/" },
        { text: "Architecture", path: "/docs/reference/architecture/" },
        { text: "Autoscaling", path: "/docs/reference/autoscaling/" },
        { text: "Builders", path: "/docs/reference/builders/" },
        { text: "Fly Launch", path: "/docs/reference/fly-launch/" },
        { text: "Load Balancing", path: "/docs/reference/load-balancing/" },
        { text: "Machine Migration", path: "/docs/reference/machine-migration/" },
        { text: "Multiple Processes in Apps", path: "/docs/app-guides/multiple-processes/" },
        { text: "Fly Proxy", path: "/docs/reference/fly-proxy/" },
        { text: "Fly Proxy Autostop/Autostart", path: "/docs/reference/fly-proxy-autostop-autostart/" },
        { text: "Regions", path: "/docs/reference/regions/" }
      ]
    },
    {
      title: "About",
      path: "/docs/about/",
      open: false,
      links: [
        { text: "Pricing", path: "/docs/about/pricing/" },
        { text: "Billing", path: "/docs/about/billing/" },
        { text: "Engineering Jobs", path: "/docs/hiring/" },
        { text: "Healthcare on Fly.io", path: "/docs/about/healthcare/" },
        { text: "Support", path: "/docs/about/support/" },
        { text: "Extensions Program", path: "/docs/about/extensions/" },
        { text: "Extensions API", path: "/docs/reference/extensions_api/" },
        { text: "Open Source", path: "/docs/about/open-source/" },
        { text: "Using Our Brand", path: "/docs/about/brand/" },
        { text: "Privacy Policy", path: "/legal/privacy-policy/" },
        { text: "Terms of Service", path: "/legal/terms-of-service/" }
      ]
    }
  ]
%>

<%= partial "/docs/partials/accordion_nav", locals: { nav: @nav } %>
