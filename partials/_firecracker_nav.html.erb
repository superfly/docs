<%= partial "/docs/partials/back_to_docs" unless current_page?('/docs') %>

<% 
  @nav = [
    {
      title: "Getting Started",
      path: "/docs/getting-started/",
      open: current_page?("/docs"),
      links: [
        { text: "Speedrun: Launch on Fly.io", path: "/docs/speedrun/" },
        { text: "Hands-on with Fly.io", path: "/docs/hands-on/" },
        { text: "Troubleshooting Deployments", path: "/docs/getting-started/troubleshooting/" }
      ]
    },
    {
      title: "Fly Machines",
      path: "/docs/machines/",
      open: false,
      links: [
        { text: "Fly Machines overview", path: "/docs/machines/overview/" },
        { text: "Run a new Machine", path: "/docs/machines/flyctl/fly-machine-run/" },
        { text: "Update a Machine", path: "/docs/machines/flyctl/fly-machine-update/" },
        { text: "Machines API", path: "/docs/machines/api/" },
        { text: "The Machine Runtime Environment", path: "/docs/machines/runtime-environment/" },
        { text: "Run User Code on Fly Machines", path: "/docs/machines/guides-examples/functions-with-machines/" },
        { text: "Machine Sizing", path: "/docs/machines/guides-examples/machine-sizing/" },
        { text: "Machine restart policy", path: "/docs/machines/guides-examples/machine-restart-policy/" },
        { text: "Machine states", path: "/docs/machines/machine-states/" }
      ]
    },
    {
      title: "Language & Frameworks",
      path: "/docs/languages-and-frameworks/",
      open: false,
      links: [
        { text: "Run an Elixir App", path: "/docs/elixir/getting-started" },
        { text: "Run a Rails App", path: "/docs/rails/getting-started/" },
        { text: "Run a Laravel App", path: "/docs/laravel/" },
        { text: "Run a Django App", path: "/docs/django/getting-started/" },
        { text: "Run a JavaScript App", path: "/docs/js/" }
      ]
    },
    {
      title: "Fly Launch",
      path: "/docs/apps/",
      open: false,
      links: [
        { text: "Launch a New App", path: "/docs/apps/launch/" },
        { text: "Deploy a Fly App", path: "/docs/apps/deploy/" },
        { text: "Get Information about an App", path: "/docs/apps/info/" },
        { text: "Scale Machine CPU and RAM", path: "/docs/apps/scale-machine/" },
        { text: "Scale the Number of Machines", path: "/docs/apps/scale-count/" },
        { text: "Auto Stop and Start Machines", path: "/docs/apps/autostart-stop/" },
        { text: "Add volume storage", path: "/docs/apps/volume-storage/" },
        { text: "Manage volume storage", path: "/docs/apps/volume-manage/" },
        { text: "Restart an App", path: "/docs/apps/restart/" },
        { text: "Run Multiple Processes in an App", path: "/docs/apps/processes/" },
        { text: "Deploy with GitHub Actions", path: "/docs/app-guides/continuous-deployment-with-github-actions/" },
        { text: "Delete an App", path: "/docs/apps/delete/" },
        { text: "Troubleshoot apps when a host is unavailable", path: "/docs/apps/trouble-host-unavailable/" },
        { text: "Fly Launch Configuration Reference", path: "/docs/reference/configuration/" }
      ]
    },
    {
      title: "Fly GPUs",
      path: "/docs/gpus/",
      open: false,
      links: [
        { text: "GPU Quickstart", path: "/docs/gpus/gpu-quickstart/" },
        { text: "Getting Started with GPU Machines", path: "/docs/gpus/getting-started-gpus/" },
        { text: "Python GPU Dev Machine", path: "/docs/gpus/python-gpu-example/" }
      ]
    },
    {
      title: "Fly Kubernetes",
      path: "/docs/kubernetes/",
      open: false,
      links: [
        { text: "Kubernetes Quickstart", path: "/docs/kubernetes/fks-quickstart/" },
        { text: "Create an FKS cluster", path: "/docs/kubernetes/clusters/" },
        { text: "Using volumes with FKS", path: "/docs/kubernetes/volumes/" }
      ]
    },
    {
      title: "Databases & Storage",
      path: "/docs/database-storage-guides/",
      open: false,
      links: [
        { text: "Volumes", path: "/docs/volumes" },
        { text: "Tigris Object Storage", path: "/docs/reference/tigris/" },
        { text: "Fly Postgres", path: "/docs/postgres/" },
        { text: "SQLite & LiteFS", path: "/docs/litefs/" },
        { text: "Supabase Postgres", path: "/docs/reference/supabase/" },
        { text: "Upstash for RedisÂ®", path: "/docs/reference/redis/" },
        { text: "More...", path: "/docs/database-storage-guides/#other-storage-apps" }
      ]
    },
    {
      title: "Networking",
      path: "/docs/networking/",
      open: false,
      links: [
        { text: "Connect to an App Service", path: "/docs/networking/app-services/" },
        { text: "Private Networking", path: "/docs/networking/private-networking/" },
        { text: "Public Networking", path: "/docs/networking/services/" },
        { text: "Dynamic Request Routing", path: "/docs/networking/dynamic-request-routing/" },
        { text: "Use a Custom Domain", path: "/docs/networking/custom-domain/" },
        { text: "More About Custom Domains and SSL Certificates", path: "/docs/networking/custom-domains-with-fly/" },
        { text: "Request headers", path: "/docs/networking/request-headers/" },
        { text: "Run UDP Services", path: "/docs/networking/udp-and-tcp/" },
        { text: "TLS Support", path: "/docs/networking/tls/" }
      ]
    },
    {
      title: "Other Guides",
      path: "/docs/guides/",
      open: current_page?("/docs/guides/"),
      links: [
        { text: "Going to Production", path: "/docs/going-to-production/" },
        { text: "Crontab with Supercronic", path: "/docs/app-guides/supercronic/" },
        { text: "Run an ssh server", path: "/docs/app-guides/opensshd/" }
      ]
    },
    {
      title: "Reference",
      path: "/docs/reference/",
      open: false,
      links: [
        { text: "flyctl", path: "/docs/flyctl/" },
        { text: "Fly Launch Configuration (fly.toml)", path: "/docs/reference/configuration/" },
        { text: "Apps", path: "/docs/reference/apps/" },
        { text: "Architecture", path: "/docs/reference/architecture/" },
        { text: "Availability and Resiliency", path: "/docs/reference/app-availability/" },
        { text: "Builders", path: "/docs/reference/builders/" },
        { text: "Deploy Tokens", path: "/docs/reference/deploy-tokens/" },
        { text: "Sentry Error Tracking", path: "/docs/reference/sentry/" },
        { text: "Fly Launch", path: "/docs/reference/fly-launch/" },
        { text: "Load Balancing", path: "/docs/reference/load-balancing/" },
        { text: "Machines", path: "/docs/machines/overview/" },
        { text: "Metrics", path: "/docs/reference/metrics/" },
        { text: "Monorepo Apps", path: "/docs/reference/monorepo/" },
        { text: "Multiple Processes in Apps", path: "/docs/app-guides/multiple-processes/" },
        { text: "Regions", path: "/docs/reference/regions/" },
        { text: "Build Secrets", path: "/docs/reference/build-secrets/" },
        { text: "Runtime Secrets", path: "/docs/reference/secrets/" },
        { text: "Volumes", path: "/docs/reference/volumes" }
      ]
    },
    {
      title: "About",
      path: "/docs/about/",
      open: false,
      links: [
        { text: "Pricing", path: "/docs/about/pricing/" },
        { text: "Billing", path: "/docs/about/billing/" },
        { text: "Engineering Jobs", path: "/docs/hiring/" },
        { text: "Healthcare on Fly.io", path: "/docs/about/healthcare/" },
        { text: "Support", path: "/docs/about/support/" },
        { text: "Security", path: "/docs/about/security/" },
        { text: "Extensions Program", path: "/docs/about/extensions/" },
        { text: "Extensions API", path: "/docs/reference/extensions_api/" },
        { text: "Open Source", path: "/docs/about/open-source/" },
        { text: "Using Our Brand", path: "/docs/about/brand/" },
        { text: "Privacy Policy", path: "/legal/privacy-policy/" },
        { text: "Terms of Service", path: "/legal/terms-of-service/" }
      ]
    }
  ]
%>

<%= partial "/docs/partials/accordion_nav", locals: { nav: @nav } %>
